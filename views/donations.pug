extend dashboard
include mixins/_navbarDashboard.pug
include mixins/_donationTable.pug

block  header
  +navbarDashboard()

block prepend content
  - var view = '/donations'
block append content
    section.section.is-main-section
      .tile.is-ancestor
        +overviewTile('Collected', '2 of 6', 'shopping-bag')
        +overviewTile('Claimed', '5.2 kg', 'box')
        +overviewTile('Available', '6.9 kg', 'fruit-apple')
      if establishmentType === 'Fridge'
        #donations-map(data-lat=account.location.coordinates[0] data-lng=account.location.coordinates[1])
        .modal.has-align-items-center
          .modal-background
          .modal-card
            header.modal-card-head.has-background-primary
              p.modal-card-title.is-size-3.has-text-weight-bold.has-text-white
              button.delete.closeBtn(aria-label="close")
            section.modal-card-body.pb-0
              label.has-text-weight-semibold.mb-2
                span.icon.is-small.mr-2
                  ion-icon(src=`/icons/location-pin.svg`)
                span Address
              p.subtitle.is-5.has-text-grey.establishment-address
              label.has-text-weight-semibold.mb-2.is-flex.is-align-items-center
                span.icon.is-small.mr-2
                  ion-icon(src=`/icons/box.svg`)
                span.donor-name
              .donations
              label.has-text-weight-semibold.mb-2.is-flex.is-align-items-center
                span.icon.is-small.mr-2
                  ion-icon(src=`/icons/clock.svg`)
                span Opening hours
            footer.modal-card-foot.has-background-white
              button.button.is-primary Get directions
              button.button.is-primary.is-light.closeBtn Close
      if establishmentType === 'Fridge'
        +donationTable('Available donations', [0,1,2,3,4,5,6])
      else
        +donationTable('Your available donations')

block prepend scripts
    script(src=`https://maps.googleapis.com/maps/api/js?key=${process.env.MAP_KEY}&libraries=places`)
    script(type="module" src="/dist/js/mapHandler.js")
    script(src="/dist/js/tablePagination.js")


